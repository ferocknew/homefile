<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>无标题文档</title>
        <link href="http://js.golib.net/css/reset.css" rel="stylesheet" type="text/css" />
        <link href="flexigrid/css/flexigrid.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
        </script>
        <script type="text/javascript" src="flexigrid/flexigrid.js">
        </script>
    </head>
    <body>
        <table id="flex1" style="display:none">
        </table>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        例子一
        <table class="flexme1">
            <thead>
                <tr>
                    <th width="100">
                        Col 1
                    </th>
                    <th width="100">
                        Col 2
                    </th>
                    <th width="100">
                        Col 3 is a long header name
                    </th>
                    <th width="300">
                        Col 4
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        This is data 1 with overflowing content
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        <a href="#">This is data 1</a>
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
                <tr>
                    <td>
                        This is data 1
                    </td>
                    <td>
                        This is data 2
                    </td>
                    <td>
                        This is data 3
                    </td>
                    <td>
                        This is data 4
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>
<script type="text/javascript">
    $('.flexme1').flexigrid({
        height: 'auto',
        striped: false
    });



    var _$flexigrid = $("#flex1").flexigrid({
        height: 'auto',
        striped: false,
        url: 'data.asp',
        dataType: 'json',
        colModel: [{
            display: 'ID',
            name: 'ID',
            width: 20,
            sortable: false,
            align: 'center'
        }, {
            display: '名称',
            name: 'name',
            width: 80,
            sortable: true, //排序
            align: 'left'
        }, {
            display: 'Printable Name',
            name: 'content',
            width: 120,
            sortable: true,
            align: 'left'
        }],
        buttons: [{
            name: '添加',
            bclass: 'add',
            onpress: test
        }, {
            name: '删除',
            bclass: 'delete',
            onpress: test
        }, {
            separator: true
        }],
        searchitems: [{
            display: '信息编号',
            name: 'RINO',
            isdefault: true
        }, {
            display: '信息标题',
            name: 'RITITLE'
        }, {
            display: '信息类别',
            name: 'IC.ICNAME'
        }, {
            display: '发布作者',
            name: 'RIAUTHOR'
        }],
        sortname: "RINO",
        sortorder: "desc",
        usepager: true,
        useRp: true,
        rp: 5,
        showTableToggleBtn: true,
        rpOptions: [5, 10, 15, 20, 25, 40],
		onSuccess:function(){
			console.info(this);
		}
    });

    function test(com, grid){
        if (com == '添加') {
            $("#flex1").flexOptions({
				url:'data.asp?123123',
                query: "123123",
				qtype:"11"
            })
            $("#flex1").flexReload({});
        }
        else
            if (com == '删除') {
                var gridItem = $('.trSelected', grid)
                if (confirm('Delete ' + gridItem.length + ' items?')) {
                    var id = "";
                    $(gridItem).each(function(i){
                        if (i == $('.trSelected', grid).length - 1) {
                            id += $('.trSelected', grid).find("td:first").eq(i).text();
                        }
                        else {
                            id += $('.trSelected', grid).find("td:first").eq(i).text() + ",";
                        }
                    })
                    alert(id);
                }
            }
    }
</script>
