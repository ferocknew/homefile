(function($){function GChart(){this._defaults={width:0,height:0,margins:null,title:'',titleColor:'',titleSize:0,backgroundColor:null,chartColor:null,legend:'',legendSize:null,type:'pie3D',encoding:'',series:[this.series('Hello World',[60,40])],visibleSeries:0,dataLabels:[],axes:[],ranges:[],markers:[],minValue:0,maxValue:100,gridSize:[],gridLine:[],gridOffsets:[],extension:{},barWidth:null,barSpacing:null,barGroupSpacing:null,barZeroPoint:null,pieOrientation:0,mapArea:'world',mapRegions:[],mapDefaultColor:'white',mapColors:['aaffaa','green'],qrECLevel:null,qrMargin:null,onLoad:null}};var PROP_NAME='gChart';var COLOURS={aqua:'008080',black:'000000',blue:'0000ff',fuchsia:'ff00ff',gray:'808080',green:'008000',lime:'00ff00',maroon:'800000',navy:'000080',olive:'808000',orange:'ffa500',purple:'800080',red:'ff0000',silver:'c0c0c0',teal:'008080',transparent:'00000000',white:'ffffff',yellow:'ffff00'};var CHART_TYPES={line:'lc',lineXY:'lxy',sparkline:'ls',barHoriz:'bhs',barVert:'bvs',barHorizGrouped:'bhg',barVertGrouped:'bvg',pie:'p',pie3D:'p3',pieConcentric:'pc',venn:'v',scatter:'s',radar:'r',radarCurved:'rs',map:'t',meter:'gom',qrCode:'qr'};var SHAPES={arrow:'a',circle:'o',cross:'x',diamond:'d',down:'v',flag:'f',financial:'F',horizontal:'h',number:'N',plus:'c',sparkfill:'B',sparkline:'D',square:'s',text:'t',vertical:'V'};var PRIORITIES={behind:-1,below:-1,normal:0,above:1,inFront:1};var GRADIENTS={diagonalDown:-45,diagonalUp:45,horizontal:0,vertical:90};var ALIGNMENTS={left:-1,center:0,right:1};var DRAWING={line:'l',ticks:'t',both:'lt'};var SIMPLE_ENCODING='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var EXTENDED_ENCODING='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.';$.extend(GChart.prototype,{markerClassName:'hasGChart',calculate:-0.123,barWidthAuto:'a',barWidthRelative:'r',formatFloat:'f',formatPercent:'p',formatScientific:'e',formatCurrency:'c',setDefaults:function(options){extendRemove(this._defaults,options||{})},series:function(label,data,colour,fillColour,minValue,maxValue,thickness,segments){if(isArray(label)){segments=thickness;thickness=maxValue;maxValue=minValue;minValue=fillColour;fillColour=colour;colour=data;data=label;label=''}if(typeof colour!='string'&&!isArray(colour)){segments=maxValue;thickness=minValue;maxValue=fillColour;minValue=colour;fillColour=null;colour=null}else if(fillColour!=null&&typeof fillColour!='string'){segments=thickness;thickness=maxValue;maxValue=minValue;minValue=fillColour;fillColour=null}if(isArray(maxValue)){segments=maxValue;thickness=minValue;maxValue=null;minValue=null}return{label:label,data:data||[],color:colour||'',fillColor:fillColour,minValue:minValue,maxValue:maxValue,lineThickness:thickness,lineSegments:segments}},seriesFromCsv:function(csv){var seriesData=[];if(!isArray(csv)){csv=csv.split('\n')}if(!csv.length){return seriesData}var xyData=false;var sColumns=[];var xColumns=[];var fields=['label','color','fillColor','minValue','maxValue','lineThickness','lineSegmentLine','lineSegmentGap'];$.each(csv,function(i,line){var cols=line.split(',');if(i==0&&isNaN(parseFloat(cols[0]))){$.each(cols,function(i,val){if($.inArray(val,fields)>-1){sColumns[i]=val}else if(val.match(/^x\d+$/)){xColumns[i]=val}})}else{var series={};var data=[];var saveX=null;$.each(cols,function(i,val){if(sColumns[i]){var pos=$.inArray(sColumns[i],fields);series[sColumns[i]]=(pos>2?$.gchart._numeric(val,0):val)}else if(xColumns[i]){saveX=(val?$.gchart._numeric(val,-1):null);xyData=true}else{var y=$.gchart._numeric(val,-1);data.push(saveX!=null?[saveX,y]:y);saveX=null}});if(series.lineSegmentLine!=null&&series.lineSegmentGap!=null){series.lineSegments=[series.lineSegmentLine,series.lineSegmentGap];series.lineSegmentLine=series.lineSegmentGap=null}seriesData.push($.extend(series,{data:data}))}});return(xyData?this.seriesForXYLines(seriesData):seriesData)},seriesFromXml:function(xml){if($.browser.msie&&typeof xml=='string'){var doc=new ActiveXObject('Microsoft.XMLDOM');doc.validateOnParse=false;doc.resolveExternals=false;doc.loadXML(xml);xml=doc}xml=$(xml);var seriesData=[];var xyData=false;try{xml.find('series').each(function(){var series=$(this);var data=[];series.find('point').each(function(){var point=$(this);var x=point.attr('x');if(x!=null){xyData=true;x=$.gchart._numeric(x,-1)}y=$.gchart._numeric(point.attr('y'),-1);data.push(x?[x,y]:y)});var segments=series.attr('lineSegments');if(segments){segments=segments.split(',')}seriesData.push({label:series.attr('label'),data:data,color:series.attr('color'),fillColor:series.attr('fillColor'),minValue:series.attr('minValue'),maxValue:series.attr('maxValue'),lineThickness:series.attr('lineThickness'),lineSegments:segments})})}catch(e){}return(xyData?this.seriesForXYLines(seriesData):seriesData)},_numeric:function(val,whenNaN){val=parseFloat(val);return(isNaN(val)?whenNaN:val)},lineXYSeries:function(series){return this.seriesForXYLines(series)},seriesForXYLines:function(series){var xySeries=[];for(var i=0;i<series.length;i++){var xNull=!isArray(series[i].data[0]);var xData=(xNull?[null]:[]);var yData=[];for(var j=0;j<series[i].data.length;j++){if(xNull){yData.push(series[i].data[j])}else{xData.push(series[i].data[j][0]);yData.push(series[i].data[j][1])}}xySeries.push($.gchart.series(series[i].label,xData,series[i].color,series[i].fillColor,series[i].minValue,series[i].maxValue,series[i].lineThickness,series[i].lineSegments));xySeries.push($.gchart.series(series[i].label,yData,'',series[i].fillColor,series[i].minValue,series[i].maxValue,series[i].lineThickness,series[i].lineSegments))}return xySeries},scatter:function(values,options){var series=[[],[],[]];for(var i=0;i<values.length;i++){series[0][i]=values[i][0];series[1][i]=values[i][1];series[2][i]=values[i][2]||100}return $.extend({},options||{},{type:'scatter',series:[$.gchart.series('',series[0]),$.gchart.series('',series[1]),$.gchart.series('',series[2])]})},venn:function(size1,size2,size3,overlap12,overlap13,overlap23,overlap123,options){return $.extend({},options||{},{type:'venn',series:[$.gchart.series([size1,size2,size3,overlap12,overlap13,overlap23,overlap123])]})},meter:function(text,value,maxValue,colours,options){if(typeof text!='string'){options=colours;colours=maxValue;maxValue=value;value=text;text=''}if(typeof maxValue!='number'){options=colours;colours=maxValue;maxValue=null}if(!isArray(colours)){options=colours;colours=null}if(colours){var cs='';$.each(colours,function(i,v){cs+=','+$.gchart.color(v)});colours=cs.substr(1)}return $.extend({},options||{},{type:'meter',maxValue:maxValue||100,dataLabels:[text||''],series:[$.gchart.series([value])]},(colours?{extension:{chco:colours}}:{}))},map:function(mapArea,values,defaultColour,startColour,endColour,options){if(typeof mapArea=='object'){options=endColour;endColour=startColour;startColour=defaultColour;defaultColour=values;values=mapArea;mapArea='world'}if(typeof defaultColour=='object'){options=defaultColour;defaultColour=null}else if(typeof startColour=='object'){options=startColour;startColour=null}else if(typeof endColour=='object'){options=endColour;endColour=null}var mapRegions=[];var data=[];var i=0;for(var name in values){mapRegions[i]=name;data[i]=values[name];i++}return $.extend({},options||{},{type:'map',mapArea:mapArea,mapRegions:mapRegions,mapDefaultColor:defaultColour||$.gchart._defaults.mapDefaultColor,mapColors:[startColour||$.gchart._defaults.mapColors[0],endColour||$.gchart._defaults.mapColors[1]],series:[$.gchart.series('',data)]})},qrCode:function(text,encoding,ecLevel,margin){var options={};if(typeof text=='object'){options=text}else{options={dataLabels:[text],encoding:encoding,qrECLevel:ecLevel,qrMargin:margin}}options.type='qrCode';if(options.text){options.dataLabels=[options.text];options.text=null}return options},color:function(r,g,b,a){var checkRange=function(value){if(typeof value=='number'&&(value<0||value>255)){throw'Value out of range (0-255) '+value;}};var twoDigits=function(value){return(value.length==1?'0':'')+value};if(typeof r=='string'){checkRange(g);return(COLOURS[r]||r)+(g?twoDigits(g.toString(16)):'')}checkRange(r);checkRange(g);checkRange(b);checkRange(a);return twoDigits(r.toString(16))+twoDigits(g.toString(16))+twoDigits(b.toString(16))+(a?twoDigits(a.toString(16)):'')},gradient:function(angle,colour1,colour2){var colourPoints=[];if(isArray(colour1)){var step=1/(colour1.length-1);for(var i=0;i<colour1.length;i++){colourPoints.push([colour1[i],Math.round(i*step*100)/100])}}else{colourPoints=[[colour1,0],[colour2,1]]}return{angle:angle,colorPoints:colourPoints}},stripe:function(angle,colours){var colourPoints=[];var width=Math.round(100/colours.length)/100;for(var i=0;i<colours.length;i++){colourPoints.push([colours[i],width])}return{angle:angle,striped:true,colorPoints:colourPoints}},range:function(vertical,colour,start,end){if(typeof vertical=='string'){end=start;start=colour;colour=vertical;vertical=false}return{vertical:vertical,color:colour,start:start,end:end}},marker:function(shape,colour,series,item,size,priority,text,positioned){if(typeof size=='string'){positioned=priority;text=size;priority=null;size=null}return{shape:shape,color:colour,series:series,item:(item||item==0?item:-1),size:size||10,priority:(priority!=null?priority:0),text:text,positioned:positioned}},numberFormat:function(type,prefix,suffix,precision,showX,zeroes,separators){if(typeof prefix=='number'){separators=showX;zeroes=precision;showX=suffix;precision=prefix;suffix='';prefix=''}if(typeof prefix=='boolean'){separators=precision;zeroes=suffix;showX=prefix;precision=0;suffix='';prefix=''}if(typeof suffix=='number'){separators=zeroes;zeroes=showX;showX=precision;precision=suffix;suffix=''}if(typeof suffix=='boolean'){separators=showX;zeroes=precision;showX=suffix;precision=0;suffix=''}if(typeof precision=='boolean'){separators=zeroes;zeroes=showX;showX=precision;precision=0}return(prefix||'')+'*'+type+(precision||'')+(zeroes?'z':'')+(separators?'s':'')+(showX?'x':'')+'*'+(suffix||'')},axis:function(axis,labels,positions,rangeStart,rangeEnd,rangeInterval,colour,alignment,size){return new GChartAxis(axis,labels,positions,rangeStart,rangeEnd,rangeInterval,colour,alignment,size)},_attachGChart:function(target,options){target=$(target);if(target.is('.'+this.markerClassName)){return}target.addClass(this.markerClassName);options=options||{};var width=options.width||parseInt(target.css('width'),10);var height=options.height||parseInt(target.css('height'),10);var allOptions=$.extend({},this._defaults,options,{width:width,height:height});$.data(target[0],PROP_NAME,allOptions);this._updateChart(target[0],allOptions)},_changeGChart:function(target,options){var curOptions=$.data(target,PROP_NAME);extendRemove(curOptions||{},options||{});$.data(target,PROP_NAME,curOptions);this._updateChart(target,curOptions)},_destroyGChart:function(target){target=$(target);if(!target.is('.'+this.markerClassName)){return}target.removeClass(this.markerClassName).empty();$.removeData(target[0],PROP_NAME)},_generateChart:function(options){var type=CHART_TYPES[options.type]||'p3';var encoding=this['_'+options.encoding+'Encoding']||this['_textEncoding'];var labels='';for(var i=0;i<options.dataLabels.length;i++){labels+='|'+encodeURIComponent(options.dataLabels[i]||'')}labels=(labels.length==options.dataLabels.length?'':labels);var legends='';var colours='';var hasColour=false;var lines='';for(var i=0;i<options.series.length;i++){legends+='|'+encodeURIComponent(options.series[i].label||'');var clrs='';if(type!='lxy'||i%2==0){var sep=',';$.each((isArray(options.series[i].color)?options.series[i].color:[options.series[i].color]),function(i,v){var colour=$.gchart.color(v||'');if(colour){hasColour=true}clrs+=sep+(colour||'000000');sep='|'})}colours+=(hasColour?clrs:'');if(type.substr(0,1)=='l'&&options.series[i].lineThickness&&isArray(options.series[i].lineSegments)){lines+='|'+options.series[i].lineThickness+','+options.series[i].lineSegments.join(',')}}var include=function(name,value){return(value?name+value:'')};var addSize=function(){options.width=Math.max(10,Math.min(options.width,1000));options.height=Math.max(10,Math.min(options.height,1000));if(type!='t'&&options.width*options.height>300000){options.height=Math.floor(300000/options.width)}return(type!='t'?'&chs='+options.width+'x'+options.height:'&chs='+Math.min(440,options.width)+'x'+Math.min(220,options.height))};var addMargins=function(){var margins=options.margins;margins=(margins==null?null:(typeof margins=='number'?[margins,margins,margins,margins]:(!isArray(margins)?null:(margins.length==4?margins:(margins.length==2?[margins[0],margins[0],margins[1],margins[1]]:null)))));return(!margins?'':'&chma='+margins.join(',')+(!options.legendSize||options.legendSize.length!=2?'':'|'+options.legendSize.join(',')))};var qrOptions=function(){return include('&choe=',options.encoding)+(options.qrECLevel||options.qrMargin?'&chld='+(options.qrECLevel?options.qrECLevel.charAt(0):'l')+(options.qrMargin!=null?'|'+options.qrMargin:''):'')+(labels?'&chl='+labels.substr(1):'')};var mapOptions=function(){return'&chtm='+(options.mapArea||'world')+'&chd='+encoding.apply($.gchart,[options])+(options.mapRegions&&options.mapRegions.length?'&chld='+options.mapRegions.join(''):'')+'&chco='+$.gchart.color(options.mapDefaultColor)+','+$.gchart.color(options.mapColors[0]||'aaffaa')+','+$.gchart.color(options.mapColors[1]||'green')};var pieOptions=function(){return(options.pieOrientation?'&chp='+(options.pieOrientation/180*Math.PI):'')+standardOptions()};var standardOptions=function(){return'&chd='+encoding.apply($.gchart,[options])+(labels?'&chl='+labels.substr(1):'')};var addBarSizings=function(){return(type.substr(0,1)!='b'?'':(options.barWidth==null?'':'&chbh='+options.barWidth+(options.barSpacing==null?'':','+(options.barWidth==$.gchart.barWidthRelative?Math.min(Math.max(options.barSpacing,0.0),1.0):options.barSpacing)+(options.barGroupSpacing==null?'':','+(options.barWidth==$.gchart.barWidthRelative?Math.min(Math.max(options.barGroupSpacing,0.0),1.0):options.barGroupSpacing))))+(options.barZeroPoint==null?'':'&chp='+options.barZeroPoint))};var addLineStyles=function(){return(type.charAt(0)=='l'&&lines?'&chls='+lines.substr(1):'')};var addColours=function(){return(colours.length>options.series.length?'&chco='+colours.substr(1):'')};var addTitle=function(){return include('&chtt=',encodeURIComponent(options.title))+(options.titleColor||options.titleSize?'&chts='+($.gchart.color(options.titleColor)||'000000')+','+(options.titleSize||20):'')};var addBackground=function(area,background){if(background==null){return''}if(typeof background=='string'){return area+',s,'+$.gchart.color(background)}var bg=area+',l'+(background.striped?'s':'g')+','+(GRADIENTS[background.angle]!=null?GRADIENTS[background.angle]:background.angle);for(var i=0;i<background.colorPoints.length;i++){bg+=','+$.gchart.color(background.colorPoints[i][0])+','+background.colorPoints[i][1]}return bg};var addBackgrounds=function(){var backgrounds=addBackground('|bg',options.backgroundColor)+addBackground('|c',options.chartColor);return(backgrounds?'&chf='+backgrounds.substr(1):'')};var addGrids=function(){return(options.gridSize.length==0?'':'&chg='+options.gridSize[0]+','+options.gridSize[1]+(options.gridLine.length==0?'':','+options.gridLine[0]+','+options.gridLine[1]+(options.gridOffsets.length==0?'':','+options.gridOffsets[0]+','+options.gridOffsets[1])))};var addLegends=function(){return(!options.legend||legends.length<=options.series.length?'':'&chdl='+legends.substr(1)+include('&chdlp=',options.legend.charAt(0)+(options.legend.indexOf('V')>-1?'v':'')))};var addExtensions=function(){var params='';for(var name in options.extension){params+='&'+name+'='+encodeURIComponent(options.extension[name])}return params};return'http://chart.apis.google.com/chart?cht='+type+addSize()+addMargins()+(type=='qr'?qrOptions():(type=='t'?mapOptions():(type.charAt(0)=='p'?pieOptions():standardOptions())))+addBarSizings()+addLineStyles()+addColours()+addTitle()+this._addAxes(options)+addBackgrounds()+addGrids()+this._addMarkers(options)+addLegends()+addExtensions()},_addAxes:function(options){var axes='';var axesLabels='';var axesPositions='';var axesRanges='';var axesStyles='';var axesTicks='';for(var i=0;i<options.axes.length;i++){var axisDef=(typeof options.axes[i]=='string'?new GChartAxis(options.axes[i]):options.axes[i]);var axis=axisDef.axis().charAt(0);axes+=','+(axis=='b'?'x':(axis=='l'?'y':axis));if(axisDef.labels()){var labels='';for(var j=0;j<axisDef.labels().length;j++){labels+='|'+encodeURIComponent(axisDef.labels()[j]||'')}axesLabels+=(labels?'|'+i+':'+labels:'')}if(axisDef.positions()){var positions='';for(var j=0;j<axisDef.positions().length;j++){positions+=','+axisDef.positions()[j]}axesPositions+=(positions?'|'+i+positions:'')}if(axisDef.range()){var range=axisDef.range();axesRanges+='|'+i+','+range[0]+','+range[1]+(range[2]?','+range[2]:'')}if(axisDef.style()||axisDef.drawing()||axisDef.ticks()){var style=axisDef.style()||{};var ticks=axisDef.ticks()||{};axesStyles+='|'+i+','+$.gchart.color(style.color||'gray')+','+(style.size||10)+','+(ALIGNMENTS[style.alignment]||style.alignment||0)+(!axisDef.drawing()&&!ticks.color?'':','+(DRAWING[axisDef.drawing()]||axisDef.drawing()||'lt')+(ticks.color?','+$.gchart.color(ticks.color):''))}if(axisDef.ticks()&&axisDef.ticks().length){axesTicks+='|'+i+','+axisDef.ticks().length}}return(!axes?'':'&chxt='+axes.substr(1)+(!axesLabels?'':'&chxl='+axesLabels.substr(1))+(!axesPositions?'':'&chxp='+axesPositions.substr(1))+(!axesRanges?'':'&chxr='+axesRanges.substr(1))+(!axesStyles?'':'&chxs='+axesStyles.substr(1))+(!axesTicks?'':'&chxtc='+axesTicks.substr(1)))},_addMarkers:function(options){var markers='';var decodeItem=function(item,positioned){if(item=='all'){return-1}if(typeof item=='string'){var matches=/^every(\d+)(?:\[(\d+):(\d+)\])?$/.exec(item);if(matches){var every=parseInt(matches[1],10);return(matches[2]&&matches[3]?(positioned?Math.max(0.0,Math.min(1.0,matches[2])):matches[2])+':'+(positioned?Math.max(0.0,Math.min(1.0,matches[3])):matches[3])+':'+every:-every)}}if(isArray(item)){$.map(item,function(v,i){return(positioned?Math.max(0.0,Math.min(1.0,v)):v)});return item.join(':')}return item};for(var i=0;i<options.markers.length;i++){var marker=options.markers[i];var shape=SHAPES[marker.shape]||marker.shape;markers+='|'+(marker.positioned?'@':'')+shape+('fNt'.indexOf(shape)>-1?marker.text||'':'')+','+$.gchart.color(marker.color)+','+marker.series+','+decodeItem(marker.item,marker.positioned)+','+marker.size+','+(PRIORITIES[marker.priority]!=null?PRIORITIES[marker.priority]:marker.priority)}for(var i=0;i<options.ranges.length;i++){markers+='|'+(options.ranges[i].vertical?'R':'r')+','+$.gchart.color(options.ranges[i].color)+',0,'+options.ranges[i].start+','+(options.ranges[i].end||options.ranges[i].start+0.005)}for(var i=0;i<options.series.length;i++){markers+=(!options.series[i].fillColor?'':'|b,'+$.gchart.color(options.series[i].fillColor)+','+i+','+(i+1)+',0')}return(markers?'&chm='+markers.substr(1):'')},_updateChart:function(target,options){var img=$(new Image());img.load(function(){$(target).find('img').remove().end().append(this);if(options.onLoad){options.onLoad.apply(target,[])}});options._src=this._generateChart(options);$(img).attr('src',options._src)},_textEncoding:function(options){var minValue=(options.minValue==$.gchart.calculate?this._calculateMinValue(options.series):options.minValue);var maxValue=(options.maxValue==$.gchart.calculate?this._calculateMaxValue(options.series):options.maxValue);var data='';for(var i=0;i<options.series.length;i++){data+='|'+this._textEncode(options.series[i],minValue,maxValue)}return't'+(options.visibleSeries||'')+':'+data.substr(1)},_textEncode:function(series,minValue,maxValue){minValue=(series.minValue!=null?series.minValue:minValue);maxValue=(series.maxValue!=null?series.maxValue:maxValue);var factor=100/(maxValue-minValue);var data='';for(var i=0;i<series.data.length;i++){data+=','+(series.data[i]==null||isNaN(series.data[i])?'-1':Math.round(factor*(series.data[i]-minValue)*100)/100)}return data.substr(1)},_scaledEncoding:function(options){var minValue=(options.minValue==$.gchart.calculate?this._calculateMinValue(options.series):options.minValue);var maxValue=(options.maxValue==$.gchart.calculate?this._calculateMaxValue(options.series):options.maxValue);var data='';var minMax='';for(var i=0;i<options.series.length;i++){data+='|'+this._scaledEncode(options.series[i],minValue);minMax+=','+(options.series[i].minValue!=null?options.series[i].minValue:minValue)+','+(options.series[i].maxValue!=null?options.series[i].maxValue:maxValue)}return't'+(options.visibleSeries||'')+':'+data.substr(1)+'&chds='+minMax.substr(1)},_scaledEncode:function(series,minValue){minValue=(series.minValue!=null?series.minValue:minValue);var data='';for(var i=0;i<series.data.length;i++){data+=','+(series.data[i]==null||isNaN(series.data[i])?(minValue-1):series.data[i])}return data.substr(1)},_simpleEncoding:function(options){var minValue=(options.minValue==$.gchart.calculate?this._calculateMinValue(options.series):options.minValue);var maxValue=(options.maxValue==$.gchart.calculate?this._calculateMaxValue(options.series):options.maxValue);var data='';for(var i=0;i<options.series.length;i++){data+=','+this._simpleEncode(options.series[i],minValue,maxValue)}return's'+(options.visibleSeries||'')+':'+data.substr(1)},_simpleEncode:function(series,minValue,maxValue){minValue=(series.minValue!=null?series.minValue:minValue);maxValue=(series.maxValue!=null?series.maxValue:maxValue);var factor=61/(maxValue-minValue);var data='';for(var i=0;i<series.data.length;i++){data+=(series.data[i]==null||isNaN(series.data[i])?'_':SIMPLE_ENCODING.charAt(Math.round(factor*(series.data[i]-minValue))))}return data},_extendedEncoding:function(options){var minValue=(options.minValue==$.gchart.calculate?this._calculateMinValue(options.series):options.minValue);var maxValue=(options.maxValue==$.gchart.calculate?this._calculateMaxValue(options.series):options.maxValue);var data='';for(var i=0;i<options.series.length;i++){data+=','+this._extendedEncode(options.series[i],minValue,maxValue)}return'e'+(options.visibleSeries||'')+':'+data.substr(1)},_extendedEncode:function(series,minValue,maxValue){minValue=(series.minValue!=null?series.minValue:minValue);maxValue=(series.maxValue!=null?series.maxValue:maxValue);var factor=4095/(maxValue-minValue);var encode=function(value){return EXTENDED_ENCODING.charAt(value/64)+EXTENDED_ENCODING.charAt(value%64)};var data='';for(var i=0;i<series.data.length;i++){data+=(series.data[i]==null||isNaN(series.data[i])?'__':encode(Math.round(factor*(series.data[i]-minValue))))}return data},_calculateMinValue:function(series){var minValue=99999999;for(var i=0;i<series.length;i++){var data=series[i].data;for(var j=0;j<data.length;j++){minValue=Math.min(minValue,(data[j]==null?99999999:data[j]))}}return minValue},_calculateMaxValue:function(series){var maxValue=-99999999;for(var i=0;i<series.length;i++){var data=series[i].data;for(var j=0;j<data.length;j++){maxValue=Math.max(maxValue,(data[j]==null?-99999999:data[j]))}}return maxValue}});function GChartAxis(axis,labels,positions,rangeStart,rangeEnd,rangeInterval,colour,alignment,size){if(typeof labels=='number'){size=colour;alignment=rangeInterval;colour=rangeEnd;rangeInterval=rangeStart;rangeEnd=positions;rangeStart=labels;positions=null;labels=null}else if(!isArray(positions)){size=alignment;alignment=colour;colour=rangeInterval;rangeInterval=rangeEnd;rangeEnd=rangeStart;rangeStart=positions;positions=null}if(typeof rangeStart=='string'){size=rangeInterval;alignment=rangeEnd;colour=rangeStart;rangeInterval=null;rangeEnd=null;rangeStart=null}if(typeof rangeInterval=='string'){size=alignment;alignment=colour;colour=rangeInterval;rangeInterval=null}if(typeof alignment=='number'){size=alignment;alignment=null}this._axis=axis;this._labels=labels;this._positions=positions;this._range=(rangeStart!=null?[rangeStart,rangeEnd,rangeInterval]:null);this._color=colour;this._alignment=alignment;this._size=size;this._drawing=null;this._tickColor=null;this._tickLength=null}$.extend(GChartAxis.prototype,{axis:function(axis){if(arguments.length==0){return this._axis}this._axis=axis;return this},labels:function(labels){if(arguments.length==0){return this._labels}this._labels=labels;return this},positions:function(positions){if(arguments.length==0){return this._positions}this._positions=positions;return this},range:function(start,end,interval){if(arguments.length==0){return this._range}this._range=[start,end,interval];return this},style:function(colour,alignment,size){if(arguments.length==0){return(!this._color&&!this._alignment&&!this._size?null:{color:this._color,alignment:this._alignment,size:this._size})}this._color=colour;this._alignment=alignment;this._size=size;return this},drawing:function(drawing){if(arguments.length==0){return this._drawing}this._drawing=drawing;return this},ticks:function(colour,length){if(arguments.length==0){return(!this._tickColor&&!this._tickLength?null:{color:this._tickColor,length:this._tickLength})}this._tickColor=colour;this._tickLength=length;return this}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=null}}return target}function isArray(a){return(a&&a.constructor==Array)}$.fn.gchart=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(options=='current'){return $.gchart['_'+options+'GChart'].apply($.gchart,[this[0]].concat(otherArgs))}return this.each(function(){if(typeof options=='string'){$.gchart['_'+options+'GChart'].apply($.gchart,[this].concat(otherArgs))}else{$.gchart._attachGChart(this,options)}})};$.gchart=new GChart()})(jQuery);
